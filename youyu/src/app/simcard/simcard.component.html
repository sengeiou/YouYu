<!-- Content Wrapper. Contains page content -->

<div class="content-wrapper">
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1>SIM列表</h1>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a routerLink='/'>首页</a></li>
                    </ol>
                </div>
            </div>
        </div>
    </section>



    <section class="content">


        <div class="row">
            <div class="col-md-12">
                <!-- Horizontal Form -->
                <div class="card card-info">
                    <div class="card-header bg-gray-d">
                        <h3 class="card-title">搜索条件</h3>
                    </div>
                    <!-- /.card-header -->
                    <!-- form start -->
                    <form class="form-horizontal">
                        <div class="card-body">
                            <div class="row">
                                <div class="form-group  col-lg-4 col-md-5  col-sm-6">
                                    <label for="inputEmail3" class=" col-form-label">ID号</label>
                                    <input type="text" class="form-control" id="inputEmail3" placeholder="请输入ID号"
                                        name='idno' [(ngModel)]='idno' />
                                </div>
                                <!-- <div class="form-group  col-lg-4 col-md-5  col-sm-6">
                                    <label for="inputEmail3" class=" col-form-label">代理商账号</label>
                                    <input type="text" class="form-control" id="inputEmail3" placeholder="请输入代理商账号"
                                        name='account' [(ngModel)]='account' />
                                </div>
                                <div class="form-group  col-lg-4 col-md-5  col-sm-6">
                                    <label for="inputEmail3" class=" col-form-label">联系电话</label>
                                    <input type="text" class="form-control" id="inputEmail3" placeholder="请输入联系电话"
                                        name='mobile' [(ngModel)]='mobile' />
                                </div> -->

                            </div>
                        </div>
                        <!-- /.card-body -->
                        <div class="card-footer">
                            <div class="float-right">
                                <button type="submit" class="btn bg-gray" (click)='reset()'>重置</button>
                                <button type="submit" class="btn btn-primary margin-left-20"
                                    (click)='search()'>搜索</button>
                            </div>

                            <div>
                                <button type="submit" class="btn btn-info " data-toggle="modal" data-target="#modal-xl"
                                    (click)='piliang()'>批量分配</button>
                            </div>

                        </div>
                        <!-- /.card-footer -->
                    </form>
                </div>
                <!-- /.card -->


            </div>
        </div>


        <div class="row">
            <div class="col-md-12">
                <div class="card">



                    <div class="card-header">
                        <!-- <h3 class="card-title">Simple Full Width Table</h3> -->
                        <div class="card-title h5  ">总条数：{{simcardlist.length}}条</div>

                        <div class="card-tools">
                            <ul class="pagination pagination-sm float-right">
                                <li class="page-item"><span class="page-link" (click)='Previous()'>&laquo;</span></li>
                                <li class="page-item" *ngFor='let i of pageList'><span
                                        class="page-link {{selPage==i?'bg-primary':''}}"
                                        (click)='changedate(i)'>{{i}}</span></li>
                                <li class="page-item"><span class="page-link" (click)='Next()'>&raquo;</span></li>
                            </ul>
                        </div>


                    </div>

                    <!-- /.card-header -->
                    <div class="card-body p-0" style="overflow-x: auto;">
                        <table class="table text-center" style="min-width: 768px;">
                            <thead>
                                <tr>
                                    <th width='1%'><img src="{{uploadpath}}resource/{{res.check}}" class="icon-20"
                                            *ngIf='allchose==true' (click)='chooseall()' />
                                        <img src="{{uploadpath}}resource/{{res.nocheck}}" class="icon-20"
                                            *ngIf='allchose==false' (click)='chooseall()' /></th>
                                    <th>ID号</th>
                                    <th>渠道号</th>
                                    <th>类型</th>
                                    <th>电信供应商及运营商</th>
                                    <th>使用状态</th>
                                    <th>是否有码号</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor='let item of simcardlist;let i=index'>
                                    <td>
                                        <img src="{{uploadpath}}resource/{{res.check}}" class="icon-20"
                                            *ngIf='item.checking==true' (click)='chooseone(i,item)' />
                                        <img src="{{uploadpath}}resource/{{res.nocheck}}" class="icon-20"
                                            *ngIf='item.checking==false' (click)='chooseone(i,item)' />
                                    </td>


                                    <td>{{item.cardnumber}}</td>
                                    <td>{{item.qudao}}</td>
                                    <td>{{item.type_name}}</td>
                                    <td>{{item.carrier}}</td>
                                    <td>{{item.usestatus_name}}</td>
                                    <td>{{item.youma}}</td>

                                    <!-- <td> <span class="badge">
                                            {{item.status=="A"?"启用":"禁用"}}</span>
                                    </td> -->

                                    <td>
                                        <!-- <div class="badge bg-primary margin-right"><img
                                                src="{{uploadpath}}resource/{{res.update}}" class="icon-15"
                                                title="分配" (click)='fenpei(item.id)'></div> -->

                                        <div class="badge bg-success margin-right" title="分配"
                                            (click)='chooseagent(item.id)' data-toggle="modal" data-target="#modal-xl">
                                            <img src="{{uploadpath}}resource/{{res.update}}" class="icon-15" /></div>

                                        <div class="badge bg-success margin-right" title="查看"
                                            (click)='chakan(item.cardnumber)' data-toggle="modal" data-target="#modal-xl2">
                                            <img src="{{uploadpath}}resource/{{res.update}}" class="icon-15" /></div>

                                        <div class="badge bg-danger" data-toggle="modal" data-target="#modal-default">
                                            <img src="{{uploadpath}}resource/{{res.delete}}" class="icon-15" title="删除">
                                        </div>
                                    </td>

                                </tr>

                            </tbody>
                        </table>
                    </div>

                </div>


            </div>
        </div>

    </section>


</div>



<div class="modal fade" id="modal-xl">

    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <!-- <button data-dismiss="modal" class="btn btn-primary margin-left"><img
                        src="{{uploadpath}}resource/{{res.update}}" class="icon-15" title="分配"></button> -->
                <div class="flex-1"></div>
                <h4 class="modal-title">代理商选择</h4>
                <div class="flex-1"></div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>

            </div>


            <div class="modal-body">

                <div>
                    <select name='country' [(ngModel)]='agent_id' id="inputEmail3"
                        class="form-control col-form-label-sm">
                        <option value="">请选择</option>
                        <option value="{{item.id}}" *ngFor='let item of agentlist'>
                            {{item.name}}</option>
                    </select>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>


                <button type="submit" class="btn bg-primary" (click)='fenpei()'>保存</button>

            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<div class="modal fade" id="modal-xl2"  *ngIf='info!=null'>

    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                
                <div class="flex-1"></div>
                <h4 class="modal-title">套餐详情</h4>
                <div class="flex-1"></div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>

            </div>


            <div class="modal-body" >

                <div >
                 剩余流量:{{info.dataUsageTotal}}MB
                </div>

                <div  >
                <div  class="margin-top-20" *ngFor='let item of info.dataPackage'>
                   
                    <div>套餐名称:{{item.productName}}</div>
                    <div>套餐已使用流量:{{item.dataUsage}}</div> 
               </div>
            </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
  
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>